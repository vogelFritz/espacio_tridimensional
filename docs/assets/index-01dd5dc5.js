var A=Object.defineProperty;var G=(s,t,i)=>t in s?A(s,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[t]=i;var n=(s,t,i)=>(G(s,typeof t!="symbol"?t+"":t,i),i);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const u of r.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function i(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(e){if(e.ep)return;e.ep=!0;const r=i(e);fetch(e.href,r)}})();const M=s=>{const t=Math.sqrt(1/(s.x**2+s.y**2+s.z**2));return new h(s.x*t,s.y*t,s.z*t)},l=(s,t)=>new h(s.x*t,s.y*t,s.z*t),w=(s,t)=>new h(s.y*t.z-s.z*t.y,t.x*s.z-t.z*s.x,s.x*t.y-s.y*t.x),y=(s,t)=>new h(s.x+t.x,s.y+t.y,s.z+t.z),$=s=>new h(-s.x,-s.y,-s.z),T=document.querySelector(".grafico"),L=s=>T.offsetWidth/2+s,z=s=>T.offsetHeight/2-s;class h{constructor(t,i,a){n(this,"x");n(this,"y");n(this,"z");this.x=t,this.y=i,this.z=a}}class P{constructor(){n(this,"puntos",[]);n(this,"triangulos",[]);n(this,"lineas",[])}agregarPunto(t){this.puntos.push(t)}agregarTriangulo(t,i,a){let e=[];e.push(t,i,a),this.triangulos.push(e)}agregarLinea(t,i){let a=[];a.push(t,i),this.lineas.push(a)}}class q{constructor(t,i,a,e){n(this,"pos");n(this,"dir");n(this,"u");n(this,"v");n(this,"angGiro",.08819);n(this,"pasoAvance",1);this.pos=t,this.dir=i,this.u=a,this.v=e}girarArriba(){const t=l(this.v,this.angGiro);this.dir=y(this.dir,t),this.dir=M(this.dir),this.v=w(this.dir,this.u)}girarAbajo(){const t=l($(this.v),this.angGiro);this.dir=y(this.dir,t),this.dir=M(this.dir),this.v=w(this.dir,this.u)}girarIzq(){const t=l(this.u,this.angGiro);this.dir=y(this.dir,t),this.dir=M(this.dir),this.u=w(this.v,this.dir)}girarDer(){const t=l($(this.u),this.angGiro);this.dir=y(this.dir,t),this.dir=M(this.dir),this.u=w(this.v,this.dir)}avanzar(){const t=l(this.dir,this.pasoAvance);this.pos=y(this.pos,t)}retroceder(){const t=l(this.dir,-this.pasoAvance);this.pos=y(this.pos,t)}moverIzq(){const t=l(this.u,this.pasoAvance);this.pos=y(this.pos,t)}moverDer(){const t=l(this.u,-this.pasoAvance);this.pos=y(this.pos,t)}}class g{constructor(t,i){n(this,"x");n(this,"y");n(this,"ptoR3");n(this,"visible",!1);n(this,"divHTML");this.ptoR3=t;const a=-1*(i.dir.x*t.x+i.dir.y*t.y+i.dir.z*t.z),e=(-a-i.dir.x*i.pos.x-i.dir.y*i.pos.y-i.dir.z*i.pos.z)/(i.dir.x**2+i.dir.y**2+i.dir.z**2),r=new h(i.pos.x+e*i.dir.x,i.pos.y+e*i.dir.y,i.pos.z+e*i.dir.z),u=Math.sqrt((r.x-i.pos.x)**2+(r.y-i.pos.y)**2+(r.z-i.pos.z)**2);let o=i.u.y*i.v.x-i.u.x*i.v.y;o!=0?(this.y=(i.u.y*(t.x-r.x)-i.u.x*(t.y-r.y))/o,this.x=(i.v.y*(t.x-r.x)-i.v.x*(t.y-r.y))/-o):(o=i.u.z*i.v.x-i.u.x*i.v.z,o!=0?(this.y=(i.u.z*(t.x-r.x)-i.u.x*(t.z-r.z))/o,this.x=(i.v.z*(t.x-r.x)-i.v.x*(t.z-r.z))/-o):(o=i.u.z*i.v.y-i.u.y*i.v.z,this.y=(i.u.z*(t.y-r.y)-i.u.y*(t.z-r.z))/o,this.x=(i.v.z*(t.y-r.y)-i.v.y*(t.z-r.z))/-o)),this.x=this.x/u*T.offsetHeight,this.y=this.y/u*T.offsetHeight,this.divHTML=document.createElement("div"),this.divHTML.className="punto",this.divHTML.style.top=`${z(this.y)}px`,this.divHTML.style.left=`${L(this.x)}px`,e>0&&(this.visible=!0)}}class E{constructor(t,i){n(this,"pto1");n(this,"pto2");n(this,"puntos",[]);n(this,"divHTML");this.puntos.push(t.ptoR3,i.ptoR3);const a=z(t.y),e=L(t.x),r=z(i.y),o=L(i.x)-e,d=r-a;this.pto1=t,this.pto2=i,this.divHTML=document.createElement("div"),this.divHTML.className="linea",this.divHTML.style.top=`${a}px`,this.divHTML.style.left=`${e+2.5}px`,this.divHTML.style.width=`${Math.sqrt(o**2+d**2)}px`,this.divHTML.style.transform=`rotate(${Math.atan2(d,o)}rad)`}}class O{constructor(t,i,a){n(this,"ver1");n(this,"ver2");n(this,"ver3");n(this,"puntos",[]);n(this,"divHTML");this.puntos.push(t.ptoR3,i.ptoR3,a.ptoR3);const e=i.x-t.x,r=i.y-t.y,u=a.x-t.x,o=a.y-t.y;let d=new h(e,r,0),x=new h(r,-e,0),v,f,H=Math.sqrt(e**2+r**2);d=M(d),x=M(x),this.ver1=t,this.ver2=i,this.ver3=a,this.divHTML=document.createElement("div"),this.divHTML.className="triangulo",this.divHTML.style.width=`${H}px`,v=(o*d.x-u*d.y)/(x.y*d.x-x.x*d.y),d.x!=0?f=(u-v*x.x)/d.x:f=(o-v*x.y)/d.y,v>0?(this.divHTML.style.top=`${z(t.y-2.5)}px`,this.divHTML.style.left=`${L(t.x+2.5)}px`,this.divHTML.style.transform=`rotate(${Math.atan2(-r,e)}rad)`,this.divHTML.style.borderLeft=`${Math.abs(f)}px solid transparent`,this.divHTML.style.borderRight=`${H-Math.abs(f)}px solid transparent`):(this.divHTML.style.top=`${z(i.y-2.5)}px`,this.divHTML.style.left=`${L(i.x+2.5)}px`,this.divHTML.style.transform=`rotate(${Math.atan2(-r,e)+Math.PI}rad)`,this.divHTML.style.borderRight=`${Math.abs(f)}px solid transparent`,this.divHTML.style.borderLeft=`${H-Math.abs(f)}px solid transparent`),this.divHTML.style.height=`${Math.abs(v)}px`,this.divHTML.style.borderTop=`${Math.abs(v)}px solid blue`}}class D{constructor(){n(this,"divHTML");this.divHTML=document.querySelector(".grafico")}render(t,i){this.divHTML.replaceChildren(""),t.puntos.forEach(a=>{const e=new g(a,i);this.divHTML.append(e.divHTML)}),t.triangulos.forEach(a=>{const e=new O(new g(a[0],i),new g(a[1],i),new g(a[2],i));this.divHTML.append(e.divHTML)}),t.lineas.forEach(a=>{const e=new E(new g(a[0],i),new g(a[1]),i);this.divHTML.append(e.divHTML)})}}const m=new D;let p=new P,c=new q(new h(0,0,50),new h(0,0,-1),new h(1,0,0),new h(0,1,0));p.agregarPunto(new h(0,0,0));p.agregarPunto(new h(20,20,0));p.agregarPunto(new h(20,-20,0));p.agregarPunto(new h(40,0,0));p.agregarTriangulo(new h(20,20,0),new h(20,-20,0),new h(40,0,0));m.render(p,c);m.divHTML.addEventListener("keydown",s=>{switch(s.key){case"ArrowUp":c.girarArriba();break;case"ArrowDown":c.girarAbajo();break;case"ArrowLeft":c.girarIzq();break;case"ArrowRight":c.girarDer();break;case"w":case"W":c.avanzar();break;case"s":case"S":c.retroceder();break;case"a":case"A":c.moverIzq();break;case"d":case"D":c.moverDer();break}m.render(p,c),console.log(c)});
