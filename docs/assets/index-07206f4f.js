var P=Object.defineProperty;var k=(e,t,i)=>t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var n=(e,t,i)=>(k(e,typeof t!="symbol"?t+"":t,i),i);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const x of r.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&a(x)}).observe(document,{childList:!0,subtree:!0});function i(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(s){if(s.ep)return;s.ep=!0;const r=i(s);fetch(s.href,r)}})();const w=e=>{const t=Math.sqrt(1/(e.x**2+e.y**2+e.z**2));return new h(e.x*t,e.y*t,e.z*t)},p=(e,t)=>new h(e.x*t,e.y*t,e.z*t),H=(e,t)=>new h(e.y*t.z-e.z*t.y,t.x*e.z-t.z*e.x,e.x*t.y-e.y*t.x),f=(e,t)=>new h(e.x+t.x,e.y+t.y,e.z+t.z),$=e=>new h(-e.x,-e.y,-e.z),m=document.querySelector(".grafico"),T=e=>m.offsetWidth/2+e,z=e=>m.offsetHeight/2-e;class h{constructor(t,i,a){n(this,"x");n(this,"y");n(this,"z");this.x=t,this.y=i,this.z=a}}class q{constructor(){n(this,"puntos",[]);n(this,"triangulos",[]);n(this,"lineas",[])}agregarPunto(t){this.puntos.push(t)}agregarTriangulo(t,i,a){let s=[];s.push(t,i,a),this.triangulos.push(s)}agregarLinea(t,i){let a=[];a.push(t,i),this.lineas.push(a)}}class E{constructor(t,i,a,s){n(this,"pos");n(this,"dir");n(this,"u");n(this,"v");n(this,"angGiro",.08819);n(this,"pasoAvance",1);this.pos=t,this.dir=i,this.u=a,this.v=s}girarArriba(t){const i=p(this.v,this.angGiro*-t);this.dir=f(this.dir,i),this.dir=w(this.dir),this.v=H(this.dir,this.u)}girarAbajo(t){const i=p($(this.v),this.angGiro*t);this.dir=f(this.dir,i),this.dir=w(this.dir),this.v=H(this.dir,this.u)}girarIzq(t){const i=p(this.u,this.angGiro*t);this.dir=f(this.dir,i),this.dir=w(this.dir),this.u=H(this.v,this.dir)}girarDer(t){const i=p($(this.u),this.angGiro*-t);this.dir=f(this.dir,i),this.dir=w(this.dir),this.u=H(this.v,this.dir)}avanzar(){const t=p(this.dir,this.pasoAvance);this.pos=f(this.pos,t)}retroceder(){const t=p(this.dir,-this.pasoAvance);this.pos=f(this.pos,t)}moverIzq(){const t=p(this.u,-this.pasoAvance);this.pos=f(this.pos,t)}moverDer(){const t=p(this.u,this.pasoAvance);this.pos=f(this.pos,t)}}class L{constructor(t,i){n(this,"x");n(this,"y");n(this,"ptoR3");n(this,"visible",!1);n(this,"divHTML");this.ptoR3=t;const a=-1*(i.dir.x*t.x+i.dir.y*t.y+i.dir.z*t.z),s=(-a-i.dir.x*i.pos.x-i.dir.y*i.pos.y-i.dir.z*i.pos.z)/(i.dir.x**2+i.dir.y**2+i.dir.z**2),r=new h(i.pos.x+s*i.dir.x,i.pos.y+s*i.dir.y,i.pos.z+s*i.dir.z),x=Math.sqrt((r.x-i.pos.x)**2+(r.y-i.pos.y)**2+(r.z-i.pos.z)**2);let c=i.u.y*i.v.x-i.u.x*i.v.y;c!=0?(this.y=(i.u.y*(t.x-r.x)-i.u.x*(t.y-r.y))/c,this.x=(i.v.y*(t.x-r.x)-i.v.x*(t.y-r.y))/-c):(c=i.u.z*i.v.x-i.u.x*i.v.z,c!=0?(this.y=(i.u.z*(t.x-r.x)-i.u.x*(t.z-r.z))/c,this.x=(i.v.z*(t.x-r.x)-i.v.x*(t.z-r.z))/-c):(c=i.u.z*i.v.y-i.u.y*i.v.z,this.y=(i.u.z*(t.y-r.y)-i.u.y*(t.z-r.z))/c,this.x=(i.v.z*(t.y-r.y)-i.v.y*(t.z-r.z))/-c)),this.x=this.x/x*m.offsetHeight,this.y=this.y/x*m.offsetHeight,this.divHTML=document.createElement("div"),this.divHTML.className="punto",this.divHTML.style.top=`${z(this.y)}px`,this.divHTML.style.left=`${T(this.x)}px`,s>0&&(this.visible=!0)}}class D{constructor(t,i){n(this,"pto1");n(this,"pto2");n(this,"puntos",[]);n(this,"divHTML");this.puntos.push(t.ptoR3,i.ptoR3);const a=z(t.y),s=T(t.x),r=z(i.y),c=T(i.x)-s,l=r-a;this.pto1=t,this.pto2=i,this.divHTML=document.createElement("div"),this.divHTML.className="linea",this.divHTML.style.top=`${a}px`,this.divHTML.style.left=`${s+2.5}px`,this.divHTML.style.width=`${Math.sqrt(c**2+l**2)}px`,this.divHTML.style.transform=`rotate(${Math.atan2(l,c)}rad)`}}class O{constructor(t,i,a){n(this,"ver1");n(this,"ver2");n(this,"ver3");n(this,"puntos",[]);n(this,"visible",!1);n(this,"divHTML");this.puntos.push(t.ptoR3,i.ptoR3,a.ptoR3);const s=i.x-t.x,r=i.y-t.y,x=a.x-t.x,c=a.y-t.y;let l=new h(s,r,0),v=new h(r,-s,0),g,M,A=Math.sqrt(s**2+r**2);l=w(l),v=w(v),this.ver1=t,this.ver2=i,this.ver3=a,this.divHTML=document.createElement("div"),this.divHTML.className="triangulo",this.divHTML.style.width=`${A}px`,g=(c*l.x-x*l.y)/(v.y*l.x-v.x*l.y),l.x!=0?M=(x-g*v.x)/l.x:M=(c-g*v.y)/l.y,g>0?(this.divHTML.style.top=`${z(t.y-2.5)}px`,this.divHTML.style.left=`${T(t.x+2.5)}px`,this.divHTML.style.transform=`rotate(${Math.atan2(-r,s)}rad)`,this.divHTML.style.borderLeft=`${Math.abs(M)}px solid transparent`,this.divHTML.style.borderRight=`${A-Math.abs(M)}px solid transparent`):(this.divHTML.style.top=`${z(i.y-2.5)}px`,this.divHTML.style.left=`${T(i.x+2.5)}px`,this.divHTML.style.transform=`rotate(${Math.atan2(-r,s)+Math.PI}rad)`,this.divHTML.style.borderRight=`${Math.abs(M)}px solid transparent`,this.divHTML.style.borderLeft=`${A-Math.abs(M)}px solid transparent`),this.divHTML.style.height=`${Math.abs(g)}px`,this.divHTML.style.borderTop=`${Math.abs(g)}px solid blue`,(t.visible||i.visible||a.visible)&&(this.visible=!0)}}class I{constructor(){n(this,"divHTML");this.divHTML=document.querySelector(".grafico")}render(t,i){this.divHTML.replaceChildren(""),t.puntos.forEach(a=>{const s=new L(a,i);s.visible&&this.divHTML.append(s.divHTML)}),t.triangulos.forEach(a=>{const s=new O(new L(a[0],i),new L(a[1],i),new L(a[2],i));s.visible&&this.divHTML.append(s.divHTML)}),t.lineas.forEach(a=>{const s=new D(new L(a[0],i),new L(a[1]),i);this.divHTML.append(s.divHTML)})}}const y=new I;let u=new q,d=new E(new h(0,0,50),new h(0,0,-1),new h(1,0,0),new h(0,1,0)),o=[];for(let e=0;e<8;e++)o.push(!1);u.agregarPunto(new h(0,0,0));u.agregarPunto(new h(20,20,0));u.agregarPunto(new h(20,-20,0));u.agregarPunto(new h(40,0,0));u.agregarTriangulo(new h(20,20,0),new h(20,-20,0),new h(40,0,0));y.render(u,d);y.divHTML.addEventListener("keydown",e=>{switch(e.key){case"ArrowUp":o[0]=!0;break;case"ArrowDown":o[1]=!0;break;case"ArrowLeft":o[2]=!0;break;case"ArrowRight":o[3]=!0;break;case"w":case"W":o[4]=!0;break;case"s":case"S":o[5]=!0;break;case"a":case"A":o[6]=!0;break;case"d":case"D":o[7]=!0}});y.divHTML.addEventListener("keyup",e=>{switch(e.key){case"ArrowUp":o[0]=!1;break;case"ArrowDown":o[1]=!1;break;case"ArrowLeft":o[2]=!1;break;case"ArrowRight":o[3]=!1;break;case"w":case"W":o[4]=!1;break;case"s":case"S":o[5]=!1;break;case"a":case"A":o[6]=!1;break;case"d":case"D":o[7]=!1}});const G=()=>{o[0]&&(d.girarArriba(-.5),y.render(u,d)),o[1]&&(d.girarAbajo(.5),y.render(u,d)),o[2]&&(d.girarIzq(-.5),y.render(u,d)),o[3]&&(d.girarDer(.5),y.render(u,d)),o[4]&&(d.avanzar(-.5),y.render(u,d)),o[5]&&(d.retroceder(-.5),y.render(u,d)),o[6]&&(d.moverIzq(-.5),y.render(u,d)),o[7]&&(d.moverDer(-.5),y.render(u,d)),setTimeout(G,10)};G();
