var $=Object.defineProperty;var G=(s,t,i)=>t in s?$(s,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[t]=i;var n=(s,t,i)=>(G(s,typeof t!="symbol"?t+"":t,i),i);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const u of r.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function i(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(e){if(e.ep)return;e.ep=!0;const r=i(e);fetch(e.href,r)}})();const v=s=>{const t=Math.sqrt(1/(s.x**2+s.y**2+s.z**2));return new o(s.x*t,s.y*t,s.z*t)},l=(s,t)=>new o(s.x*t,s.y*t,s.z*t),M=(s,t)=>new o(s.y*t.z-s.z*t.y,t.x*s.z-t.z*s.x,s.x*t.y-s.y*t.x),y=(s,t)=>new o(s.x+t.x,s.y+t.y,s.z+t.z),A=s=>new o(-s.x,-s.y,-s.z),z=document.querySelector(".grafico"),L=s=>z.offsetWidth/2+s,w=s=>z.offsetHeight/2-s;class o{constructor(t,i,a){n(this,"x");n(this,"y");n(this,"z");this.x=t,this.y=i,this.z=a}}class q{constructor(){n(this,"puntos",[]);n(this,"triangulos",[]);n(this,"lineas",[])}agregarPunto(t){this.puntos.push(t)}agregarTriangulo(t,i,a){let e=[];e.push(t,i,a),this.triangulos.push(e)}agregarLinea(t,i){let a=[];a.push(t,i),this.lineas.push(a)}}class E{constructor(t,i,a,e){n(this,"pos");n(this,"dir");n(this,"u");n(this,"v");n(this,"angGiro",.08819);n(this,"pasoAvance",1);this.pos=t,this.dir=i,this.u=a,this.v=e}girarArriba(){const t=l(this.v,this.angGiro);this.dir=y(this.dir,t),this.dir=v(this.dir),this.v=M(this.dir,this.u)}girarAbajo(){const t=l(A(this.v),this.angGiro);this.dir=y(this.dir,t),this.dir=v(this.dir),this.v=M(this.dir,this.u)}girarIzq(){const t=l(this.u,this.angGiro);this.dir=y(this.dir,t),this.dir=v(this.dir),this.u=M(this.v,this.dir)}girarDer(){const t=l(A(this.u),this.angGiro);this.dir=y(this.dir,t),this.dir=v(this.dir),this.u=M(this.v,this.dir)}avanzar(){const t=l(this.dir,this.pasoAvance);this.pos=y(this.pos,t)}retroceder(){const t=l(this.dir,-this.pasoAvance);this.pos=y(this.pos,t)}moverIzq(){const t=l(this.u,this.pasoAvance);this.pos=y(this.pos,t)}moverDer(){const t=l(this.u,-this.pasoAvance);this.pos=y(this.pos,t)}}class x{constructor(t,i){n(this,"x");n(this,"y");n(this,"ptoR3");n(this,"visible",!1);n(this,"divHTML");this.ptoR3=t;const a=-1*(i.dir.x*t.x+i.dir.y*t.y+i.dir.z*t.z),e=(-a-i.dir.x*i.pos.x-i.dir.y*i.pos.y-i.dir.z*i.pos.z)/(i.dir.x**2+i.dir.y**2+i.dir.z**2),r=new o(i.pos.x+e*i.dir.x,i.pos.y+e*i.dir.y,i.pos.z+e*i.dir.z),u=Math.sqrt((r.x-i.pos.x)**2+(r.y-i.pos.y)**2+(r.z-i.pos.z)**2);let h=i.u.y*i.v.x-i.u.x*i.v.y;h!=0?(this.y=(i.u.y*(t.x-r.x)-i.u.x*(t.y-r.y))/h,this.x=(i.v.y*(t.x-r.x)-i.v.x*(t.y-r.y))/-h):(h=i.u.z*i.v.x-i.u.x*i.v.z,h!=0?(this.y=(i.u.z*(t.x-r.x)-i.u.x*(t.z-r.z))/h,this.x=(i.v.z*(t.x-r.x)-i.v.x*(t.z-r.z))/-h):(h=i.u.z*i.v.y-i.u.y*i.v.z,this.y=(i.u.z*(t.y-r.y)-i.u.y*(t.z-r.z))/h,this.x=(i.v.z*(t.y-r.y)-i.v.y*(t.z-r.z))/-h)),this.x=this.x/u*z.offsetHeight,this.y=this.y/u*z.offsetHeight,this.divHTML=document.createElement("div"),this.divHTML.className="punto",this.divHTML.style.top=`${w(this.y)}px`,this.divHTML.style.left=`${L(this.x)}px`,e>0&&(this.visible=!0)}}class O{constructor(t,i){n(this,"pto1");n(this,"pto2");n(this,"puntos",[]);n(this,"divHTML");this.puntos.push(t.ptoR3,i.ptoR3);const a=w(t.y),e=L(t.x),r=w(i.y),h=L(i.x)-e,d=r-a;this.pto1=t,this.pto2=i,this.divHTML=document.createElement("div"),this.divHTML.className="linea",this.divHTML.style.top=`${a}px`,this.divHTML.style.left=`${e+2.5}px`,this.divHTML.style.width=`${Math.sqrt(h**2+d**2)}px`,this.divHTML.style.transform=`rotate(${Math.atan2(d,h)}rad)`}}class P{constructor(t,i,a){n(this,"ver1");n(this,"ver2");n(this,"ver3");n(this,"puntos",[]);n(this,"divHTML");this.puntos.push(t.ptoR3,i.ptoR3,a.ptoR3);const e=i.x-t.x,r=i.y-t.y,u=a.x-t.x,h=a.y-t.y;let d=new o(e,r,0),p=new o(r,-e,0),f,g,m=Math.sqrt(e**2+r**2);d=v(d),p=v(p),this.ver1=t,this.ver2=i,this.ver3=a,this.divHTML=document.createElement("div"),this.divHTML.className="triangulo",this.divHTML.style.top=`${w(t.y-2.5)}px`,this.divHTML.style.left=`${L(t.x+2.5)}px`,this.divHTML.style.width=`${m}px`,this.divHTML.style.transform=`rotate(${Math.atan2(-r,e)}rad)`,f=(h*d.x-u*d.y)/(p.y*d.x-p.x*d.y),this.divHTML.style.height=`${Math.abs(f)}px`,d.x!=0?g=(u-f*p.x)/d.x:g=(h-f*p.y)/d.y,this.divHTML.style.borderLeft=`${Math.abs(g)}px solid transparent`,this.divHTML.style.borderRight=`${m-Math.abs(g)}px solid transparent`,this.divHTML.style.borderTop=`${Math.abs(f)}px solid blue`}}class D{constructor(){n(this,"divHTML");this.divHTML=document.querySelector(".grafico")}render(t,i){this.divHTML.replaceChildren(""),t.puntos.forEach(a=>{const e=new x(a,i);this.divHTML.append(e.divHTML)}),t.triangulos.forEach(a=>{const e=new P(new x(a[0],i),new x(a[1],i),new x(a[2],i));this.divHTML.append(e.divHTML)}),t.lineas.forEach(a=>{const e=new O(new x(a[0],i),new x(a[1]),i);this.divHTML.append(e.divHTML)})}}const H=new D;let T=new q,c=new E(new o(0,0,50),new o(0,0,-1),new o(1,0,0),new o(0,1,0));T.agregarPunto(new o(0,0,0));T.agregarTriangulo(new o(20,20,0),new o(20,-20,0),new o(40,0,0));H.render(T,c);H.divHTML.addEventListener("keydown",s=>{switch(s.key){case"ArrowUp":c.girarArriba();break;case"ArrowDown":c.girarAbajo();break;case"ArrowLeft":c.girarIzq();break;case"ArrowRight":c.girarDer();break;case"w":case"W":c.avanzar();break;case"s":case"S":c.retroceder();break;case"a":case"A":c.moverIzq();break;case"d":case"D":c.moverDer();break}H.render(T,c),console.log(c)});
